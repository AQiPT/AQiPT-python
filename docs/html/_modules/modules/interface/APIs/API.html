


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>modules.interface.APIs.API &mdash; AQiPT: Atomic Quantum information Processing Toolbox  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/plot_directive.css" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #34495e" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/logo_icon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../prerequisites.html">Pre-requisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../structure.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notebooks.html">Notebooks</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #34495e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">AQiPT: Atomic Quantum information Processing Toolbox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">modules.interface.APIs.API</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for modules.interface.APIs.API</h1><div class="highlight"><pre>
<span></span><span class="c1">#Atomic Quantum information Processing Tool (AQIPT - /ɪˈkwɪpt/) - AQiPT interface module (API)</span>

<span class="c1"># Author(s): Manuel Morgado. Universite de Strasbourg. Laboratory of Exotic Quantum Matter - CESQ</span>
<span class="c1">#                            Universitaet Stuttgart. 5. Physikalisches Institut - QRydDemo</span>
<span class="c1"># Contributor(s): S.Whitlock. Universite de Strasbourg. Laboratory of Exotic Quantum Matter - CESQ</span>
<span class="c1">#                 T.Biename. Universite de Strasbourg. Laboratory of Exotic Quantum Matter - CESQ</span>
<span class="c1"># Created: 2023-02-07</span>
<span class="c1"># Last update: 2024-12-14</span>

<span class="c1">#libs</span>
<span class="kn">import</span> <span class="nn">ctypes</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">ceil</span>

<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>

<span class="kn">from</span> <span class="nn">AQiPT</span> <span class="kn">import</span> <span class="n">AQiPTcore</span> <span class="k">as</span> <span class="n">aqipt</span>
<span class="kn">from</span> <span class="nn">AQiPT.modules.control</span> <span class="kn">import</span> <span class="n">AQiPTcontrol</span> <span class="k">as</span> <span class="n">control</span>
<span class="kn">from</span> <span class="nn">AQiPT.modules.kernel</span> <span class="kn">import</span> <span class="n">AQiPTkernel</span> <span class="k">as</span> <span class="n">kernel</span>
<span class="kn">from</span> <span class="nn">AQiPT.modules.analysis</span> <span class="kn">import</span> <span class="n">AQiPTanalysis</span> <span class="k">as</span> <span class="n">analysis</span>
<span class="kn">from</span> <span class="nn">AQiPT.modules.daq</span> <span class="kn">import</span> <span class="n">AQiPTdaq</span> <span class="k">as</span> <span class="n">daq</span>

<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">import</span> <span class="nn">dash_core_components</span> <span class="k">as</span> <span class="nn">dcc</span>
<span class="kn">import</span> <span class="nn">dash_html_components</span> <span class="k">as</span> <span class="nn">html</span>

<span class="c1">###################################################################################################</span>
<span class="c1">#######################                 Backend API                  ##############################</span>
<span class="c1">###################################################################################################</span>


<div class="viewcode-block" id="constant">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.constant">[docs]</a>
<span class="k">def</span> <span class="nf">constant</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Default constant&#39;</span><span class="p">,</span> <span class="n">dyn_params</span><span class="p">:</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">),</span> <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}),</span> <span class="n">tpw</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ftype</span><span class="o">=</span><span class="s1">&#39;square&#39;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-function for creating a constant DC signal at to time,</span>
<span class="sd">        DC value and a given duration time .</span>
<span class="sd">        </span>
<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        to (float): start time for the constant waveform</span>
<span class="sd">        value (float): amplitude value </span>
<span class="sd">        duration (float): duration of the constant value</span>
<span class="sd">        dyn_params (aqipt.general_params): AQiPT general parameters object with sampling, bithdepth and dynamic time </span>
<span class="sd">        tpw (float): time window of pulse</span>
<span class="sd">        color (str): color of the ploted waveform</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        ftype (str): function type (from AQiPTcontrol module function)</span>
<span class="sd">        show_plot (bool): shows plot or not</span>


<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>
<span class="sd">        </span>
<span class="sd">        aqipt_function, plot (tuple): AQiPT function object and generated plot</span>
<span class="sd">    </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1">#check if dynamic params are given</span>
    <span class="k">if</span> <span class="n">dyn_params</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Remember adding the dynamic parameters.&quot;</span><span class="p">)</span>


    <span class="k">else</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">tpw</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="n">tpw</span> <span class="o">=</span> <span class="n">duration</span><span class="p">;</span>

        <span class="n">tbase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tpw</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">tpw</span><span class="o">*</span><span class="n">dyn_params</span><span class="o">.</span><span class="n">sampling</span><span class="p">));</span>

        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;amp&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s1">&#39;t_o&#39;</span><span class="p">:</span> <span class="n">to</span><span class="o">+</span><span class="p">(</span><span class="n">duration</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">duration</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> 
                    <span class="s1">&#39;tp_window&#39;</span><span class="p">:</span><span class="n">tpw</span><span class="p">,</span> 
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> 
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">ftype</span><span class="p">};</span>

        <span class="c1">#function creation</span>
        <span class="n">aqipt_function</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">tbase</span><span class="p">,</span> <span class="n">arguments</span><span class="p">);</span>
        <span class="n">function</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="n">show_plot</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">show_plot</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="c1">#plot</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Time [$\mu s$]&#39;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Amplitude [V]&#39;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">function</span><span class="p">),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;function: &#39;</span><span class="o">+</span><span class="n">arguments</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span><span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                    <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span>
                                <span class="n">ec</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>
                                <span class="n">fc</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),)</span> <span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">aqipt_function</span><span class="p">,</span> <span class="n">plot</span></div>


<div class="viewcode-block" id="wait">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.wait">[docs]</a>
<span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Default wait&#39;</span><span class="p">,</span> <span class="n">dyn_params</span><span class="p">:</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">),</span> <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}),</span> <span class="n">tpw</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ftype</span><span class="o">=</span><span class="s1">&#39;square&#39;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-function for creating a constant zero DC signal at to time,</span>
<span class="sd">        DC=0 value and a given duration time.</span>
<span class="sd">        </span>
<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        to (float): start time for the constant waveform</span>
<span class="sd">        duration (float):  duration of the constant value</span>
<span class="sd">        dyn_params (aqipt.general_params): AQiPT general parameters object with sampling, bithdepth and dynamic time </span>
<span class="sd">        tpw (float): time window of pulse</span>
<span class="sd">        color (str): color of the ploted waveform</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        ftype (str): function type (from AQiPTcontrol module function)</span>
<span class="sd">        show_plot (bool): shows plot or not</span>


<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        aqipt_function, plot (tuple): AQiPT function object and generated plot</span>
<span class="sd">        </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1">#check if dynamic params are given</span>
    <span class="k">if</span> <span class="n">dyn_params</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Remember adding the dynamic parameters.&quot;</span><span class="p">)</span>
        

    <span class="k">else</span><span class="p">:</span>
       
        <span class="k">if</span> <span class="n">tpw</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="n">tpw</span> <span class="o">=</span> <span class="n">duration</span><span class="p">;</span>

        <span class="n">tbase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tpw</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">tpw</span><span class="o">*</span><span class="n">dyn_params</span><span class="o">.</span><span class="n">sampling</span><span class="p">));</span>

        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;amp&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;t_o&#39;</span><span class="p">:</span> <span class="n">to</span><span class="o">+</span><span class="p">(</span><span class="n">duration</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">duration</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> 
                     <span class="s1">&#39;tp_window&#39;</span><span class="p">:</span><span class="n">tpw</span><span class="p">,</span> 
                     <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> 
                     <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">ftype</span><span class="p">};</span>

        <span class="c1">#function creation</span>
        <span class="n">aqipt_function</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">tbase</span><span class="p">,</span> <span class="n">arguments</span><span class="p">);</span>
        <span class="n">function</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="n">show_plot</span><span class="p">);</span>

        <span class="k">if</span> <span class="n">show_plot</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="c1">#plot</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Time [$\mu s$]&#39;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Amplitude [V]&#39;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">function</span><span class="p">),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;function: &#39;</span><span class="o">+</span><span class="n">arguments</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span><span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                    <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span>
                                <span class="n">ec</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>
                                <span class="n">fc</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),)</span> <span class="p">);</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">aqipt_function</span><span class="p">,</span> <span class="n">plot</span></div>


<div class="viewcode-block" id="digital">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.digital">[docs]</a>
<span class="k">def</span> <span class="nf">digital</span><span class="p">(</span><span class="n">ch_id</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">time_range</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">ttl_duration</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Default digital&#39;</span><span class="p">,</span> <span class="n">risetime</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">falltime</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">invertion</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dyn_params</span><span class="p">:</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">),</span> <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}),</span> <span class="n">tpw</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-function + AQiPT-pulse for creating a square pulse signal</span>
<span class="sd">        at to time, with DC value and a given duration time. Also consider as TTL signal.</span>
<span class="sd">        </span>
<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        ch_id (str): ID of physical channel in hardware</span>
<span class="sd">        time_range (list): full time of the digital waveform including rise and fall time</span>
<span class="sd">        ttl_duration (float): time duration of the digital square waveform</span>
<span class="sd">        risetime (float): time for the signal to raise (e.g., response time)</span>
<span class="sd">        falltime (float): time for the signal to fall (e.g., relaxation time)</span>
<span class="sd">        invertion (bool): definition of the HIGH and LOW states</span>
<span class="sd">        dyn_params (aqipt.general_params): AQiPT general parameters object with sampling, bithdepth and dynamic time </span>
<span class="sd">        tpw (float): time window of pulse</span>
<span class="sd">        color (str): color of the ploted waveform</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        show_plot (bool): shows plot or not</span>

<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        _AQiPT_waveform, _hw_python, arguments (tuple): AQiPT pulse object, hardware python instance and arguments of the pulse</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">rising</span><span class="p">,</span> <span class="n">rplot</span> <span class="o">=</span> <span class="n">wait</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">risetime</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl_rise&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">risetime</span><span class="p">);</span>
    <span class="n">fall</span><span class="p">,</span> <span class="n">fplot</span> <span class="o">=</span> <span class="n">wait</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">falltime</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl_fall&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">falltime</span><span class="p">);</span>

    <span class="k">if</span> <span class="n">invertion</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span>
        <span class="n">ttl</span><span class="p">,</span> <span class="n">tplot</span> <span class="o">=</span> <span class="n">constant</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">ttl_duration</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">ttl_duration</span><span class="p">);</span>
    <span class="k">elif</span> <span class="n">invertion</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
        <span class="n">ttl</span><span class="p">,</span> <span class="n">tplot</span> <span class="o">=</span> <span class="n">constant</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">ttl_duration</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">ttl_duration</span><span class="p">);</span>

    <span class="n">_AQiPT_waveform</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="n">time_range</span><span class="p">,</span> <span class="n">signals</span><span class="o">=</span><span class="p">[</span><span class="n">rising</span><span class="p">,</span> <span class="n">ttl</span><span class="p">,</span> <span class="n">fall</span><span class="p">],</span> <span class="n">timeflags</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">risetime</span><span class="p">,</span> <span class="n">risetime</span><span class="o">+</span><span class="n">ttl_duration</span><span class="p">],</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span> <span class="n">plot_color</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>

    
    <span class="c1">#locating the python hardware object for _API_sequence</span>
    <span class="k">if</span> <span class="n">ch_id</span><span class="o">!=</span><span class="s1">&#39;0x0&#39;</span><span class="p">:</span>

        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span><span class="p">);</span> <span class="n">_identifier</span> <span class="o">=</span> <span class="n">ch_id</span><span class="p">;</span>
        
        <span class="n">_element_hex_id</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
        <span class="n">_element_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_element_hex_id</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_chspecs</span><span class="p">);</span> <span class="n">_hardware_hex_id</span> <span class="o">=</span> <span class="n">_element_python</span><span class="o">.</span><span class="n">specs</span><span class="p">[</span><span class="s1">&#39;EXT_CHANNEL&#39;</span><span class="p">];</span>

        <span class="n">_python_memory_alloc_</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_python_memory_alloc_</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


    <span class="k">else</span><span class="p">:</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span>


    <span class="c1">#locating the arguments for _API_sequence</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;API_instruction_TYPE&#39;</span><span class="p">:</span><span class="s1">&#39;DIGITAL&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;identifier&#39;</span><span class="p">:</span><span class="n">ch_id</span><span class="p">,</span>
                 <span class="s1">&#39;time_range&#39;</span> <span class="p">:</span> <span class="n">time_range</span><span class="p">,</span> 
                 <span class="s1">&#39;duration&#39;</span> <span class="p">:</span> <span class="n">ttl_duration</span><span class="p">,</span> 
                 <span class="s1">&#39;risetime&#39;</span> <span class="p">:</span> <span class="n">risetime</span><span class="p">,</span> 
                 <span class="s1">&#39;falltime&#39;</span> <span class="p">:</span> <span class="n">falltime</span><span class="p">,</span> 
                 <span class="s1">&#39;invertion&#39;</span> <span class="p">:</span> <span class="n">invertion</span><span class="p">,</span> 
                 <span class="s1">&#39;dyn_params&#39;</span><span class="p">:</span> <span class="n">dyn_params</span><span class="p">,</span> 
                 <span class="s1">&#39;time_pulse_window&#39;</span> <span class="p">:</span> <span class="n">tpw</span><span class="p">,</span> 
                 <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="n">name</span><span class="p">};</span>
    

    <span class="k">return</span> <span class="n">_AQiPT_waveform</span><span class="p">,</span> <span class="n">_hw_python</span><span class="p">,</span> <span class="n">arguments</span></div>


<div class="viewcode-block" id="digitals">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.digitals">[docs]</a>
<span class="k">def</span> <span class="nf">digitals</span><span class="p">(</span><span class="n">ch_id</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">time_range</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">timeflags</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">ttl_durations</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Default digitals&#39;</span><span class="p">,</span> <span class="n">risetimes</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">falltimes</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">invertions</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dyn_params</span><span class="p">:</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">),</span> <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}),</span> <span class="n">tpw</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bitlimits</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-function + AQiPT-pulse for creating a sequence of digital (square) signals</span>
<span class="sd">        at different to times (timeflags), with DC value and a given duration time. Also consider as TTL signal.</span>
<span class="sd">        </span>
<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        ch_id (str): ID of physical channel in hardware</span>
<span class="sd">        time_range (list): full time of the digital waveform including rise and fall time</span>
<span class="sd">        timeflags (list): list of time values when each digital waveform starts</span>
<span class="sd">        ttl_durations (float): time durations of each digital square waveforms</span>
<span class="sd">        risetimes (float): time for the signal to raise (e.g., response time)</span>
<span class="sd">        falltimes (float): time for the signal to fall (e.g., relaxation time)</span>
<span class="sd">        invertions (bool): definition of the HIGH and LOW states</span>
<span class="sd">        dyn_params (aqipt.general_params): AQiPT general parameters object with sampling, bithdepth and dynamic time</span>
<span class="sd">        tpw (float): time window of pulse</span>
<span class="sd">        color (str): color of the ploted waveform</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        show_plot (bool): shows plot or not</span>
<span class="sd">        bitlimits (list): values for limiting the vertical resolution</span>

<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>
<span class="sd">        </span>
<span class="sd">        _AQiPT_waveform, _hw_python, arguments (tuple): AQiPT pulse object, hardware python instance and arguments of the pulse</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">invertions</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">invertions</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">ttl_durations</span><span class="p">);</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">risetimes</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">risetimes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">ttl_durations</span><span class="p">);</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">falltimes</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">falltimes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">ttl_durations</span><span class="p">);</span>

    <span class="n">_signals</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="n">_timeflags</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="n">_tbase_ttl</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">_timeflag</span><span class="p">,</span> <span class="n">_ttl_duration</span><span class="p">,</span> <span class="n">_risetime</span><span class="p">,</span> <span class="n">_falltime</span><span class="p">,</span> <span class="n">_invertion</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">timeflags</span><span class="p">,</span> <span class="n">ttl_durations</span><span class="p">,</span> <span class="n">risetimes</span><span class="p">,</span> <span class="n">falltimes</span><span class="p">,</span> <span class="n">invertions</span><span class="p">):</span>

        <span class="n">_tbase_ttl_</span> <span class="o">=</span> <span class="n">_timeflag</span><span class="o">+</span><span class="n">_risetime</span> <span class="o">+</span> <span class="n">_ttl_duration</span> <span class="o">+</span> <span class="n">_falltime</span><span class="p">;</span>
        <span class="n">_tbase_ttl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tbase_ttl_</span><span class="p">);</span>

        <span class="k">if</span> <span class="n">_timeflag</span> <span class="o">&lt;</span> <span class="n">_tbase_ttl</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning: conflict between Signal </span><span class="si">{ttl1}</span><span class="s1"> and Signal </span><span class="si">{ttl2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ttl1</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">ttl2</span><span class="o">=</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">rising</span><span class="p">,</span> <span class="n">rplot</span> <span class="o">=</span> <span class="n">wait</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">_risetime</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl_rise&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">_risetime</span><span class="p">);</span>
        <span class="n">fall</span><span class="p">,</span> <span class="n">fplot</span> <span class="o">=</span> <span class="n">wait</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">_falltime</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl_fall&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">_falltime</span><span class="p">);</span>

        <span class="k">if</span> <span class="n">_invertion</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span>
            <span class="n">ttl</span><span class="p">,</span> <span class="n">tplot</span> <span class="o">=</span> <span class="n">constant</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">_ttl_duration</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">_ttl_duration</span><span class="p">);</span>
        <span class="k">elif</span> <span class="n">_invertion</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="n">bitlimits</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">ttl</span><span class="p">,</span> <span class="n">tplot</span> <span class="o">=</span> <span class="n">constant</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">_ttl_duration</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ttl&#39;</span><span class="p">,</span> <span class="n">tpw</span><span class="o">=</span><span class="n">_ttl_duration</span><span class="p">);</span>

        <span class="n">_signals</span><span class="o">+=</span><span class="p">[</span><span class="n">rising</span><span class="p">,</span><span class="n">ttl</span><span class="p">,</span><span class="n">fall</span><span class="p">];</span>
        <span class="n">_timeflags</span><span class="o">+=</span><span class="p">[</span><span class="mi">0</span><span class="o">+</span><span class="n">_timeflag</span><span class="p">,</span> <span class="n">_risetime</span><span class="o">+</span><span class="n">_timeflag</span><span class="p">,</span> <span class="p">(</span><span class="n">_risetime</span><span class="o">+</span><span class="n">_ttl_duration</span><span class="p">)</span><span class="o">+</span><span class="n">_timeflag</span><span class="p">];</span>

        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>

    <span class="n">_AQiPT_waveform</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="n">time_range</span><span class="p">,</span> <span class="n">signals</span><span class="o">=</span><span class="n">_signals</span><span class="p">,</span> <span class="n">timeflags</span><span class="o">=</span><span class="n">_timeflags</span><span class="p">,</span> <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span> <span class="n">bitlimits</span><span class="o">=</span><span class="n">bitlimits</span><span class="p">,</span> <span class="n">plot_color</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">8</span><span class="p">]);</span>

    <span class="c1">#locating the python hardware object for _API_sequence</span>
    <span class="k">if</span> <span class="n">ch_id</span><span class="o">!=</span><span class="s1">&#39;0x0&#39;</span><span class="p">:</span>

        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span><span class="p">);</span> <span class="n">_identifier</span> <span class="o">=</span> <span class="n">ch_id</span><span class="p">;</span>
        
        <span class="n">_element_hex_id</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
        <span class="n">_element_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_element_hex_id</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_chspecs</span><span class="p">);</span> <span class="n">_hardware_hex_id</span> <span class="o">=</span> <span class="n">_element_python</span><span class="o">.</span><span class="n">specs</span><span class="p">[</span><span class="s1">&#39;EXT_CHANNEL&#39;</span><span class="p">];</span>

        <span class="n">_python_memory_alloc_</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_python_memory_alloc_</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


    <span class="k">else</span><span class="p">:</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span>


    <span class="c1">#locating the arguments for _API_sequence</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;API_instruction_TYPE&#39;</span><span class="p">:</span><span class="s1">&#39;DIGITALS&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;identifier&#39;</span><span class="p">:</span><span class="n">ch_id</span><span class="p">,</span>
                 <span class="s1">&#39;time_range&#39;</span> <span class="p">:</span> <span class="n">time_range</span><span class="p">,</span>
                 <span class="s1">&#39;timeflags&#39;</span> <span class="p">:</span> <span class="n">timeflags</span><span class="p">,</span> 
                 <span class="s1">&#39;durations&#39;</span> <span class="p">:</span> <span class="n">ttl_durations</span><span class="p">,</span> 
                 <span class="s1">&#39;risetimes&#39;</span> <span class="p">:</span> <span class="n">risetimes</span><span class="p">,</span> 
                 <span class="s1">&#39;falltimes&#39;</span> <span class="p">:</span> <span class="n">falltimes</span><span class="p">,</span> 
                 <span class="s1">&#39;invertions&#39;</span> <span class="p">:</span> <span class="n">invertions</span><span class="p">,</span> 
                 <span class="s1">&#39;dyn_params&#39;</span><span class="p">:</span> <span class="n">dyn_params</span><span class="p">,</span> 
                 <span class="s1">&#39;time_pulse_window&#39;</span> <span class="p">:</span> <span class="n">tpw</span><span class="p">,</span>
                 <span class="s1">&#39;bitlimits&#39;</span> <span class="p">:</span> <span class="n">bitlimits</span><span class="p">,</span> 
                 <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="n">name</span><span class="p">};</span>
    

    <span class="k">return</span> <span class="n">_AQiPT_waveform</span><span class="p">,</span> <span class="n">_hw_python</span><span class="p">,</span> <span class="n">arguments</span></div>


<div class="viewcode-block" id="analog">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.analog">[docs]</a>
<span class="k">def</span> <span class="nf">analog</span><span class="p">(</span><span class="n">ch_id</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">analog_args</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">sampling</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">carrier_frequency</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bitdepth</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Default analog&#39;</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-function for creating any arbitrary analog signal with or</span>
<span class="sd">        without any carrier frequency.</span>
<span class="sd">        </span>

<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        ch_id (str): ID of physical channel in hardware</span>
<span class="sd">        analog_args (dict): argument to be use in the generation of an analog waveforms</span>
<span class="sd">        sampling (int): sampling rate for the analog waveforms</span>
<span class="sd">        carrier_frequency (float): frequency of the carrier, later mixed with envelop analog signal</span>
<span class="sd">        color (str): color of the ploted waveform</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        show_plot (bool): shows plot or not</span>


<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        _AQiPT_waveform, _hw_python, arguments (tuple): AQiPT pulse object, hardware python instance and arguments of the pulse</span>


<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">dyn_params</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">sampling</span><span class="p">),</span>
                                       <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">bitdepth</span><span class="p">),</span>
                                       <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;tp_window&#39;</span><span class="p">]});</span>

    <span class="n">tbase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;tp_window&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;tp_window&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">sampling</span><span class="p">));</span>

    <span class="c1">#function creation</span>
    <span class="n">aqipt_function</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">tbase</span><span class="p">,</span> <span class="n">analog_args</span><span class="p">);</span>

    <span class="k">if</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;square&#39;</span><span class="p">:</span>
        
        <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span><span class="p">;</span> <span class="c1">#fixing width/2 </span>
        <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;t_o&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;t_o&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">];</span> <span class="c1">#fixing offset due to width/2</span>

        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;sine&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">sinusoidal</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;ramp&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;chirp&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">chirp</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;chirplet&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">chirplet</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;gaussian_chirplet&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">gaussian_chirplet</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;gaussian&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;supergaussian&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">supergaussian</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">triangular</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;cspline&#39;</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">cspline</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">carrier_frequency</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">carrier_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Amp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;freq&#39;</span><span class="p">:</span><span class="n">carrier_frequency</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;tp_window&#39;</span><span class="p">:</span><span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;tp_window&#39;</span><span class="p">],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;carrier&#39;</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;sine&#39;</span><span class="p">};</span>
        <span class="n">carrier_aqipt_function</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">tbase</span><span class="p">,</span> <span class="n">carrier_args</span><span class="p">);</span>
        
        <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
            <span class="n">carrier</span><span class="p">,</span> <span class="n">carrier_plot</span> <span class="o">=</span> <span class="n">carrier_aqipt_function</span><span class="o">.</span><span class="n">sinusoidal</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="n">show_plot</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">carrier</span> <span class="o">=</span> <span class="n">carrier_aqipt_function</span><span class="o">.</span><span class="n">sinusoidal</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="n">show_plot</span><span class="p">)</span>
        
        <span class="n">aqipt_function</span><span class="o">.</span><span class="n">waveform</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">waveform</span> <span class="o">*</span> <span class="n">carrier_aqipt_function</span><span class="o">.</span><span class="n">waveform</span><span class="p">;</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
        <span class="c1">#plot</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Time [$\mu s$]&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Amplitude [V]&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">func</span><span class="p">),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;function: &#39;</span><span class="o">+</span><span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span><span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span>
                            <span class="n">ec</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>
                            <span class="n">fc</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),)</span> <span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">_AQiPT_waveform</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">analog_args</span><span class="p">[</span><span class="s1">&#39;tp_window&#39;</span><span class="p">]],</span> <span class="n">signals</span><span class="o">=</span><span class="p">[</span><span class="n">aqipt_function</span><span class="p">],</span> <span class="n">timeflags</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="n">dyn_params</span><span class="o">=</span><span class="n">dyn_params</span><span class="p">,</span> <span class="n">bitdepth</span><span class="o">=</span><span class="n">dyn_params</span><span class="o">.</span><span class="n">bitdepth</span><span class="p">,</span> <span class="n">bitlimits</span><span class="o">=</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">aqipt_function</span><span class="o">.</span><span class="n">waveform</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">aqipt_function</span><span class="o">.</span><span class="n">waveform</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">);</span>

    <span class="c1">#locating the python hardware object for _API_sequence</span>
    <span class="k">if</span> <span class="n">ch_id</span><span class="o">!=</span><span class="s1">&#39;0x0&#39;</span><span class="p">:</span>

        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span><span class="p">);</span> <span class="n">_identifier</span> <span class="o">=</span> <span class="n">ch_id</span><span class="p">;</span>
        
        <span class="n">_element_hex_id</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
        <span class="n">_element_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_element_hex_id</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_chspecs</span><span class="p">);</span> <span class="n">_hardware_hex_id</span> <span class="o">=</span> <span class="n">_element_python</span><span class="o">.</span><span class="n">specs</span><span class="p">[</span><span class="s1">&#39;EXT_CHANNEL&#39;</span><span class="p">];</span>

        <span class="n">_python_memory_alloc_</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_python_memory_alloc_</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


    <span class="k">else</span><span class="p">:</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span>


    <span class="c1">#locating the arguments for _API_sequence</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;API_instruction_TYPE&#39;</span><span class="p">:</span><span class="s1">&#39;ANALOG&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;identifier&#39;</span><span class="p">:</span><span class="n">ch_id</span><span class="p">,</span>
                 <span class="s1">&#39;analog_args&#39;</span> <span class="p">:</span> <span class="n">analog_args</span><span class="p">,</span>
                 <span class="s1">&#39;sampling&#39;</span> <span class="p">:</span> <span class="n">sampling</span><span class="p">,</span> 
                 <span class="s1">&#39;carrier_frequency&#39;</span> <span class="p">:</span> <span class="n">carrier_frequency</span><span class="p">,</span> 
                 <span class="s1">&#39;bitdepth&#39;</span> <span class="p">:</span> <span class="n">bitdepth</span><span class="p">,</span> 
                 <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="n">name</span><span class="p">};</span>
    

    <span class="k">return</span> <span class="n">_AQiPT_waveform</span><span class="p">,</span> <span class="n">_hw_python</span><span class="p">,</span> <span class="n">arguments</span></div>


<div class="viewcode-block" id="analogs">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.analogs">[docs]</a>
<span class="k">def</span> <span class="nf">analogs</span><span class="p">(</span><span class="n">ch_id</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">time_range</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">timeflags</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">analog_args</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">samplings</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">carrier_frequencies</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">bitdepths</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Default analogs&#39;</span><span class="p">,</span> <span class="n">dyn_params</span><span class="p">:</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">),</span> <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}),</span> <span class="n">analogs_duration</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bitlimits</span><span class="p">:</span><span class="nb">list</span><span class="o">=</span><span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]]):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-function + AQiPT-pulse for creating a sequence of analogs signals</span>
<span class="sd">        at different to times (timeflags), with carrier frequencies and bitdepths.</span>
<span class="sd">        </span>

<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        ch_id (str): ID of physical channel in hardware</span>
<span class="sd">        time_range (list): full time of the analogs waveform including rise and fall time</span>
<span class="sd">        timeflags (list): list of time values when each analogs waveform starts</span>
<span class="sd">        analog_args (float): list of arguments for the generation of each analog waveform</span>
<span class="sd">        samplings (int): list of sampling rates for the analog waveforms</span>
<span class="sd">        carrier_frequencies (float): list of carrier frequencies for each waveform</span>
<span class="sd">        bitdepths (list): list of bitdepths for each analog waveform</span>
<span class="sd">        dyn_params (aqipt.general_params): AQiPT general parameters object with sampling, bithdepth and dynamic time</span>
<span class="sd">        tpw (float): time window of pulse</span>
<span class="sd">        color (str): color of the ploted waveform</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        show_plot (bool): shows plot or not</span>
<span class="sd">        bitlimits (list): values for limiting the vertical resolution</span>


<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        _AQiPT_waveform, _hw_python, arguments (tuple): AQiPT pulse object, hardware python instance and arguments of the pulse</span>


<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">analogs_duration</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">analogs_duration</span> <span class="o">=</span> <span class="p">[</span><span class="n">_args</span><span class="p">[</span><span class="s1">&#39;tp_window&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">_args</span> <span class="ow">in</span> <span class="n">analog_args</span><span class="p">];</span>

    <span class="n">_signals</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">_timeflag</span><span class="p">,</span> <span class="n">_analog_args</span><span class="p">,</span> <span class="n">_sampling</span><span class="p">,</span> <span class="n">_carrier_frequency</span><span class="p">,</span> <span class="n">_bitdepth</span><span class="p">,</span> <span class="n">_tpw</span><span class="p">,</span> <span class="n">_bitlimits</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">timeflags</span><span class="p">,</span> <span class="n">analog_args</span><span class="p">,</span> <span class="n">samplings</span><span class="p">,</span> <span class="n">carrier_frequencies</span><span class="p">,</span> <span class="n">bitdepths</span><span class="p">,</span> <span class="n">analogs_duration</span><span class="p">,</span> <span class="n">bitlimits</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">_timeflag</span> <span class="o">&lt;</span> <span class="n">timeflags</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">_tpw</span> <span class="ow">and</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning: conflict between Signal </span><span class="si">{signal1}</span><span class="s1"> and Signal </span><span class="si">{signal2}</span><span class="s1">. </span><span class="se">\n</span><span class="s1"> Check time-flags and signal durations.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">signal1</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">signal2</span><span class="o">=</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">_dyn_params</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">_sampling</span><span class="p">),</span>
                                            <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">_bitdepth</span><span class="p">),</span>
                                            <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="n">_tpw</span><span class="p">});</span>

        <span class="n">tbase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_tpw</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">_tpw</span><span class="o">*</span><span class="n">_sampling</span><span class="p">));</span>

        <span class="c1">#function creation</span>
        <span class="n">aqipt_function</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">tbase</span><span class="p">,</span> <span class="n">_analog_args</span><span class="p">);</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">_analog_args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;square&#39;</span><span class="p">:</span>
            <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;sine&#39;</span><span class="p">:</span>
            <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">sinusoidal</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;ramp&#39;</span><span class="p">:</span>
            <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;chirp&#39;</span><span class="p">:</span>
            <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">chirp</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;chirplet&#39;</span><span class="p">:</span>
            <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">chirplet</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;gaussian&#39;</span><span class="p">:</span>
            <span class="n">func</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">aqipt_function</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">_carrier_frequency</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
            <span class="n">carrier_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Amp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;freq&#39;</span><span class="p">:</span><span class="n">_carrier_frequency</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;tp_window&#39;</span><span class="p">:</span><span class="n">_tpw</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;carrier&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;sine&#39;</span><span class="p">};</span>
            <span class="n">carrier_aqipt_function</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">tbase</span><span class="p">,</span> <span class="n">carrier_args</span><span class="p">);</span>
            
            <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
                <span class="n">carrier</span><span class="p">,</span> <span class="n">carrier_plot</span> <span class="o">=</span> <span class="n">carrier_aqipt_function</span><span class="o">.</span><span class="n">sinusoidal</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="n">show_plot</span><span class="p">);</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">carrier</span> <span class="o">=</span> <span class="n">carrier_aqipt_function</span><span class="o">.</span><span class="n">sinusoidal</span><span class="p">(</span><span class="n">plotON</span><span class="o">=</span><span class="n">show_plot</span><span class="p">);</span>
            
            <span class="n">aqipt_function</span><span class="o">.</span><span class="n">waveform</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">aqipt_function</span><span class="o">.</span><span class="n">waveform</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">carrier_aqipt_function</span><span class="o">.</span><span class="n">waveform</span><span class="p">);</span>

        <span class="k">if</span> <span class="n">show_plot</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
            <span class="c1">#plot</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Time [$\mu s$]&#39;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Amplitude [V]&#39;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">func</span><span class="p">),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;function: &#39;</span><span class="o">+</span><span class="n">_analog_args</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span><span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                    <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span>
                                <span class="n">ec</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>
                                <span class="n">fc</span><span class="o">=</span><span class="p">(</span><span class="mf">.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),)</span> <span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


        <span class="c1"># _AQiPT_waveform_i = compose(time_range=[0,_tpw], </span>
        <span class="c1">#                             signals=[aqipt_function], </span>
        <span class="c1">#                             timeflags=[0],  </span>
        <span class="c1">#                             dyn_params=_dyn_params, </span>
        <span class="c1">#                             bitdepth=_bitdepth, </span>
        <span class="c1">#                             bitlimits=[min(aqipt_function.waveform), max(aqipt_function.waveform)], </span>
        <span class="c1">#                             name=name, </span>
        <span class="c1">#                             show_plot=show_plot);</span>

        <span class="n">_signals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">aqipt_function</span><span class="p">);</span>

        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>


    <span class="n">_minbitlimit</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="nb">min</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">waveform</span><span class="p">)</span> <span class="k">for</span> <span class="n">signal</span> <span class="ow">in</span> <span class="n">_signals</span><span class="p">]);</span>
    <span class="n">_maxbitlimit</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">waveform</span><span class="p">)</span> <span class="k">for</span> <span class="n">signal</span> <span class="ow">in</span> <span class="n">_signals</span><span class="p">]);</span>
    <span class="n">_maxbitdepth</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">bitdepths</span><span class="p">);</span>

    <span class="n">_AQiPT_waveform</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="n">time_range</span><span class="p">,</span> 
                              <span class="n">signals</span><span class="o">=</span><span class="n">_signals</span><span class="p">,</span> 
                              <span class="n">timeflags</span><span class="o">=</span><span class="n">timeflags</span><span class="p">,</span> 
                              <span class="n">dyn_params</span><span class="o">=</span><span class="n">_dyn_params</span><span class="p">,</span> 
                              <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                              <span class="n">show_plot</span><span class="o">=</span><span class="n">show_plot</span><span class="p">,</span> 
                              <span class="n">plot_color</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">color_lst</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
                              <span class="n">bitdepth</span><span class="o">=</span><span class="n">_maxbitdepth</span><span class="p">,</span>
                              <span class="n">bitlimits</span><span class="o">=</span><span class="p">[</span><span class="n">_minbitlimit</span><span class="p">,</span> <span class="n">_maxbitlimit</span><span class="p">]);</span> <span class="c1">#TODO: add concatenate pulses in AQiPT.control.pulses and deprecate this line.</span>

    <span class="c1">#locating the python hardware object for _API_sequence</span>
    <span class="k">if</span> <span class="n">ch_id</span><span class="o">!=</span><span class="s1">&#39;0x0&#39;</span><span class="p">:</span>

        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span><span class="p">);</span> <span class="n">_identifier</span> <span class="o">=</span> <span class="n">ch_id</span><span class="p">;</span>
        
        <span class="n">_element_hex_id</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
        <span class="n">_element_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_element_hex_id</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>


        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_chspecs</span><span class="p">);</span> <span class="n">_hardware_hex_id</span> <span class="o">=</span> <span class="n">_element_python</span><span class="o">.</span><span class="n">specs</span><span class="p">[</span><span class="s1">&#39;EXT_CHANNEL&#39;</span><span class="p">];</span>

        <span class="n">_python_memory_alloc_</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_python_memory_alloc_</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>


    <span class="k">else</span><span class="p">:</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span>


    <span class="c1">#locating the arguments for _API_sequence</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;API_instruction_TYPE&#39;</span><span class="p">:</span><span class="s1">&#39;ANALOGS&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;identifier&#39;</span><span class="p">:</span><span class="n">ch_id</span><span class="p">,</span>
                 <span class="s1">&#39;time_range&#39;</span> <span class="p">:</span> <span class="n">time_range</span><span class="p">,</span>
                 <span class="s1">&#39;timeflags&#39;</span> <span class="p">:</span> <span class="n">timeflags</span><span class="p">,</span> 
                 <span class="s1">&#39;analog_args&#39;</span> <span class="p">:</span> <span class="n">analog_args</span><span class="p">,</span> 
                 <span class="s1">&#39;samplings&#39;</span> <span class="p">:</span> <span class="n">samplings</span><span class="p">,</span> 
                 <span class="s1">&#39;carrier_frequencies&#39;</span> <span class="p">:</span> <span class="n">carrier_frequencies</span><span class="p">,</span> 
                 <span class="s1">&#39;bitdepths&#39;</span> <span class="p">:</span> <span class="n">bitdepths</span><span class="p">,</span> 
                 <span class="s1">&#39;dyn_params&#39;</span><span class="p">:</span> <span class="n">dyn_params</span><span class="p">,</span> 
                 <span class="s1">&#39;time_pulse_window&#39;</span> <span class="p">:</span> <span class="n">analogs_duration</span><span class="p">,</span>
                 <span class="s1">&#39;bitlimits&#39;</span> <span class="p">:</span> <span class="n">bitlimits</span><span class="p">,</span> 
                 <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="n">name</span><span class="p">};</span>
    

    <span class="k">return</span> <span class="n">_AQiPT_waveform</span><span class="p">,</span> <span class="n">_hw_python</span><span class="p">,</span> <span class="n">arguments</span></div>


<div class="viewcode-block" id="compose">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.compose">[docs]</a>
<span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="n">time_range</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">signals</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">timeflags</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Default composed&#39;</span><span class="p">,</span> <span class="n">dyn_params</span><span class="p">:</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="o">=</span><span class="n">aqipt</span><span class="o">.</span><span class="n">general_params</span><span class="p">({</span><span class="s1">&#39;sampling&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">),</span> <span class="s1">&#39;bitdepth&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;time_dyn&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="n">bitdepth</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">bitlimits</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plot_color</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper of AQiPT-pulse for creating a pulse instance composed by functions to be stack in a AQiPT-sequence. </span>
<span class="sd">        Can be used to compose digital() signals and or analog() signals from the API.</span>
<span class="sd">        </span>

<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        time_range (list): full time of the digital waveform including rise and fall time</span>
<span class="sd">        signals (list): list of waveforms that should be composed</span>
<span class="sd">        timeflags (list): list of time values when each digital waveform starts</span>
<span class="sd">        dyn_params (aqipt.general_params): AQiPT general parameters object with sampling, bithdepth and dynamic time</span>
<span class="sd">        bitdepth (int): list of bitdepths for each analog waveform</span>
<span class="sd">        bitlimits (list): values for limiting the vertical resolution</span>
<span class="sd">        name (str): assigned name od the AQiPT object</span>
<span class="sd">        show_plot (bool): shows plot or not</span>




<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        pulse (aqipt.pulse): pulse AQiPT object</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">pulse_tbase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">time_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ceil</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">time_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span><span class="o">*</span><span class="n">dyn_params</span><span class="o">.</span><span class="n">sampling</span><span class="p">);</span>
    <span class="n">pulse</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">pulse</span><span class="p">(</span><span class="n">pulse_label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                         <span class="n">times</span><span class="o">=</span><span class="n">pulse_tbase</span><span class="p">,</span> 
                         <span class="n">function_list</span><span class="o">=</span><span class="n">signals</span><span class="p">,</span> 
                         <span class="n">timeFlags</span><span class="o">=</span><span class="n">timeflags</span><span class="p">);</span>

    <span class="n">pulse</span><span class="o">.</span><span class="n">compilePulse</span><span class="p">();</span>

    <span class="n">pulse</span><span class="o">.</span><span class="n">digitizeWaveform</span><span class="p">(</span><span class="n">bitdepth</span><span class="p">,</span> <span class="n">bitlimits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">bitlimits</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="o">==</span><span class="kc">True</span><span class="p">:</span>
      <span class="n">pulse</span><span class="o">.</span><span class="n">plotPulse</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Time [$\mu s$]&#39;</span> <span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Amplitude [V]&#39;</span><span class="p">,</span> <span class="n">_color</span><span class="o">=</span><span class="n">plot_color</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">pulse</span></div>


<div class="viewcode-block" id="data">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.data">[docs]</a>
<span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="n">ch_id</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span><span class="n">analysis</span><span class="o">.</span><span class="n">ImageData</span><span class="p">,</span> <span class="n">timeflag</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Default data&#39;</span><span class="p">,</span> <span class="n">show_data</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        API wrapper for passing data of data i.e., images to devices such as SLMs and DMDs</span>
<span class="sd">    &#39;&#39;&#39;</span>

    

        <span class="c1">#locating the python hardware object for _API_sequence</span>
    <span class="k">if</span> <span class="n">ch_id</span><span class="o">!=</span><span class="s1">&#39;0x0&#39;</span><span class="p">:</span>

        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span><span class="p">);</span> <span class="n">_identifier</span> <span class="o">=</span> <span class="n">ch_id</span><span class="p">;</span>
        
        <span class="n">_element_hex_id</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_identifier</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
        <span class="n">_element_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_element_hex_id</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


        <span class="n">_dataframe</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">_chspecs</span><span class="p">);</span> <span class="n">_hardware_hex_id</span> <span class="o">=</span> <span class="n">_element_python</span><span class="o">.</span><span class="n">specs</span><span class="p">[</span><span class="s1">&#39;EXT_CHANNEL&#39;</span><span class="p">];</span>

        <span class="n">_python_memory_alloc_</span> <span class="o">=</span> <span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">][</span><span class="n">aqipt</span><span class="o">.</span><span class="n">DFsearch</span><span class="p">(</span><span class="n">_dataframe</span><span class="p">,</span> <span class="n">_hardware_hex_id</span><span class="p">)[</span><span class="s1">&#39;python_memory_alloc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">_python_memory_alloc_</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>


    <span class="k">else</span><span class="p">:</span>
        <span class="n">_hw_python</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span></div>





<div class="viewcode-block" id="showDAQ">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.showDAQ">[docs]</a>
<span class="k">def</span> <span class="nf">showDAQ</span><span class="p">(</span><span class="n">waveforms</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        API wrapper for visualizing sequences and other acquisition data</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">daq</span><span class="o">.</span><span class="n">plotSequences</span><span class="p">(</span><span class="n">waveforms</span><span class="p">);</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;running server...&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="generateSpecifications">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.generateSpecifications">[docs]</a>
<span class="k">def</span> <span class="nf">generateSpecifications</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;JSON&#39;</span><span class="p">,</span> <span class="n">hwPATH</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">swPATH</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; </span>
<span class="sd">        API wrapper loading Hardware and Software specifications.</span>
<span class="sd">        </span>
<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        mode (str): mode if use json files</span>
<span class="sd">        hwPATH (str): path directory of hardware specification file</span>
<span class="sd">        swPATH (str): path directory of software specification file</span>

<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        (dictionary): hardware, software and channel specifications</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">global</span> <span class="n">_hwspecs</span>
    <span class="k">global</span> <span class="n">_swspecs</span>
    <span class="k">global</span> <span class="n">_chspecs</span>

    <span class="k">if</span> <span class="n">mode</span><span class="o">==</span><span class="s1">&#39;JSON&#39;</span><span class="p">:</span>
        <span class="n">_IDsBench</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">IDsBench</span><span class="p">();</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading hardware specification&#39;</span><span class="p">)</span>

        <span class="n">_hwspecs</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">hardwareSpecs</span><span class="p">();</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">loadSpecs</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">hwPATH</span><span class="p">,</span><span class="n">printON</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">printHeader</span><span class="p">();</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">initSetup</span><span class="p">();</span>

        <span class="n">_IDsBench</span><span class="o">.</span><span class="n">set_HW_bench</span><span class="p">(</span><span class="n">_hwspecs</span><span class="p">);</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span> <span class="o">=</span> <span class="n">_IDsBench</span><span class="o">.</span><span class="n">get_HW_bench</span><span class="p">();</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading software specification&#39;</span><span class="p">)</span>

        <span class="n">_swspecs</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">softwareSpecs</span><span class="p">();</span>
        <span class="n">_swspecs</span><span class="o">.</span><span class="n">loadSpecs</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">swPATH</span><span class="p">,</span><span class="n">printON</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
        <span class="n">_swspecs</span><span class="o">.</span><span class="n">printHeader</span><span class="p">();</span>

        <span class="n">_IDsBench</span><span class="o">.</span><span class="n">set_SW_bench</span><span class="p">(</span><span class="n">_swspecs</span><span class="p">);</span>
        <span class="n">_swspecs</span><span class="o">.</span><span class="n">_IDs_bench</span> <span class="o">=</span> <span class="n">_IDsBench</span><span class="o">.</span><span class="n">get_SW_bench</span><span class="p">();</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;Hardware&#39;</span><span class="p">:</span> <span class="n">_hwspecs</span><span class="p">,</span> <span class="s1">&#39;Software&#39;</span><span class="p">:</span> <span class="n">_swspecs</span><span class="p">}</span>

    <span class="k">elif</span> <span class="n">mode</span><span class="o">==</span><span class="s1">&#39;waveforms&#39;</span><span class="p">:</span>

        <span class="n">_IDsBench</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">IDsBench</span><span class="p">();</span>


        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading hardware specification&#39;</span><span class="p">)</span>

        <span class="n">_hwspecs</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">hardwareSpecs</span><span class="p">();</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">loadSpecs</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">hwPATH</span><span class="p">,</span><span class="n">printON</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">printHeader</span><span class="p">();</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">initSetup</span><span class="p">();</span>

        <span class="n">_IDsBench</span><span class="o">.</span><span class="n">set_HW_bench</span><span class="p">(</span><span class="n">_hwspecs</span><span class="p">);</span>
        <span class="n">_hwspecs</span><span class="o">.</span><span class="n">_IDs_bench</span> <span class="o">=</span> <span class="n">_IDsBench</span><span class="o">.</span><span class="n">get_HW_bench</span><span class="p">();</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Initializing software specification. &#39;</span><span class="p">)</span>

        <span class="n">_swspecs</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">softwareSpecs</span><span class="p">();</span>
        <span class="n">_swspecs</span><span class="o">.</span><span class="n">loadSpecs</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">swPATH</span><span class="p">,</span><span class="n">printON</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>

        <span class="n">_chspecs</span> <span class="o">=</span> <span class="n">_IDsBench</span><span class="o">.</span><span class="n">get_CH_bench</span><span class="p">();</span>

        <span class="c1"># global _ID_BENCH</span>
        <span class="c1"># _ID_BENCH =_hwspecs._IDs_bench;</span>


        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;Hardware&#39;</span><span class="p">:</span> <span class="n">_hwspecs</span><span class="p">,</span> <span class="s1">&#39;Software&#39;</span><span class="p">:</span> <span class="n">_swspecs</span><span class="p">,</span> <span class="s1">&#39;HWChannels&#39;</span><span class="p">:</span> <span class="n">_chspecs</span><span class="p">}</span></div>


<div class="viewcode-block" id="generateDirector">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.generateDirector">[docs]</a>
<span class="k">def</span> <span class="nf">generateDirector</span><span class="p">(</span><span class="n">atom</span><span class="p">,</span> <span class="n">HW</span><span class="p">,</span> <span class="n">SW</span><span class="p">,</span> <span class="n">calibrations</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        API wrapper for generating the director for handling the backend resources</span>
<span class="sd">        </span>

<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>

<span class="sd">        atom (): atom object for extracting properties</span>
<span class="sd">        HW (): hardware specification python abstraction</span>
<span class="sd">        SW (): software specification python abstraction</span>
<span class="sd">        calibration ():</span>
<span class="sd">        </span>
<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        _director (aqipt.director): director object from control module</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">_director</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">director</span><span class="p">(</span><span class="n">atom_specs</span><span class="o">=</span><span class="n">atom</span><span class="p">,</span> <span class="n">HW_specs</span> <span class="o">=</span> <span class="n">HW</span><span class="p">,</span> <span class="n">SW_specs</span> <span class="o">=</span> <span class="n">SW</span><span class="p">,</span> <span class="n">calibration</span><span class="o">=</span><span class="n">calibrations</span><span class="p">);</span>

    <span class="n">_director</span><span class="o">.</span><span class="n">load_drivers</span><span class="p">();</span>

    <span class="k">return</span> <span class="n">_director</span></div>


<div class="viewcode-block" id="generateProducer">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.generateProducer">[docs]</a>
<span class="k">def</span> <span class="nf">generateProducer</span><span class="p">(</span><span class="n">atom</span><span class="p">,</span> <span class="n">HW</span><span class="p">,</span> <span class="n">SW</span><span class="p">,</span> <span class="n">initial_state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_Hamiltonian</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">time_simulation</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        API wrapper for generating the director for handling the backend resources</span>
<span class="sd">        </span>

<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>
<span class="sd">        </span>
<span class="sd">        atom (): atom object for extracting properties</span>
<span class="sd">        HW (): hardware specification python abstraction</span>
<span class="sd">        SW (): software specification python abstraction</span>
<span class="sd">        initial_state (): initial state of the simulation</span>
<span class="sd">        time_Hamiltonian (bool): boolean for time simulation</span>
<span class="sd">        time_simulation (array): array of times</span>
<span class="sd">        </span>
<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        _producer (aqipt.producer): producer object from emulator module </span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">_producer</span> <span class="o">=</span> <span class="n">emulator</span><span class="o">.</span><span class="n">producer</span><span class="p">(</span><span class="n">atom_specs</span><span class="o">=</span><span class="n">atom</span><span class="p">,</span> <span class="n">HW_specs</span> <span class="o">=</span> <span class="n">HW</span><span class="p">,</span> <span class="n">SW_specs</span> <span class="o">=</span> <span class="n">SW</span><span class="p">,</span> <span class="n">simulation_time</span><span class="o">=</span><span class="n">time_simulation</span><span class="p">);</span>

    <span class="k">if</span> <span class="n">initial_state</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Invalid initial state.&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_producer</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">psi0</span><span class="o">=</span><span class="n">initial_state</span><span class="p">,</span> <span class="n">t_Hamiltonian</span><span class="o">=</span><span class="n">time_Hamiltonian</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">_producer</span></div>


<div class="viewcode-block" id="runSimulation">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.runSimulation">[docs]</a>
<span class="k">def</span> <span class="nf">runSimulation</span><span class="p">(</span><span class="n">producer</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        API wrapper for runing simulation within producer</span>
<span class="sd">        </span>

<span class="sd">        INPUTS</span>
<span class="sd">        ------</span>
<span class="sd">        </span>
<span class="sd">        producer (aqipt.producer): producer with loaded Hamiltonian and model</span>
<span class="sd">        </span>
<span class="sd">        OUTPUTS</span>
<span class="sd">        -------</span>

<span class="sd">        producer (aqipt.producer): producer object from emulator module </span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">producer</span><span class="o">.</span><span class="n">runSimulation</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">producer</span></div>


<div class="viewcode-block" id="machine">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.machine">[docs]</a>
<span class="k">def</span> <span class="nf">machine</span><span class="p">(</span><span class="n">director</span><span class="p">,</span> <span class="n">producer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="s1">&#39;Default metadata&#39;</span><span class="p">,</span> <span class="nb">compile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">execute</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nshots</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    
    <span class="n">_machine</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">experiment</span><span class="p">(</span><span class="n">director</span><span class="o">=</span><span class="n">director</span><span class="p">,</span> 
                                  <span class="n">producer</span><span class="o">=</span><span class="n">producer</span><span class="p">,</span> 
                                  <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
                                  <span class="n">operationMode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
                                  <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">nshots</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">_machine</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compilation completed.&#39;</span><span class="p">)</span>

        <span class="n">_machine</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution completed.&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">_machine</span>

    <span class="k">elif</span> <span class="n">nshots</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">_machine</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compilation completed.&#39;</span><span class="p">)</span>

        <span class="n">_machine</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution completed.&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">_machine</span></div>

            
<div class="viewcode-block" id="prepareAcquisition">
<a class="viewcode-back" href="../../../../source/modules.html#modules.interface.APIs.API.prepareAcquisition">[docs]</a>
<span class="k">def</span> <span class="nf">prepareAcquisition</span><span class="p">():</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        API wrapper for showing live acquisition</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="n">ixon897</span><span class="o">.</span><span class="n">Configure</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;FanMode&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">#0: full, 1: low, 2: off</span>
                            <span class="s1">&#39;AcquisitionMode&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">#1:single scan, #2:accumulate, 3: kinetics, 4: fast kinetics, 5: run till abort</span>
                            <span class="s1">&#39;TriggerMode&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">#0: internal, 1: external, 6: external start, 10: software trigger</span>
                            <span class="s1">&#39;ReadMode&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="c1">#0: full vertical binning, 1:multi-track, 2: random track, 3: sinlge track, 4: image</span>
                            <span class="s1">&#39;ExposureTime&#39;</span><span class="p">:</span> <span class="mf">0.01784</span><span class="p">,</span>
                            <span class="s1">&#39;NumberAccumulations&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="s1">&#39;NumberKinetics&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="s1">&#39;KineticCycleTime&#39;</span><span class="p">:</span> <span class="mf">0.02460</span><span class="p">,</span>
                            <span class="s1">&#39;VSSpeed&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s1">&#39;VSAmplitude&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;HSSpeed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                            <span class="s1">&#39;PreAmpGain&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;ImageParams&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hbin&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> 
                                            <span class="s1">&#39;vbin&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> 
                                            <span class="s1">&#39;hstart&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> 
                                            <span class="s1">&#39;hend&#39;</span><span class="p">:</span><span class="mi">512</span><span class="p">,</span> 
                                            <span class="s1">&#39;vstart&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                                            <span class="s1">&#39;vend&#39;</span><span class="p">:</span><span class="mi">512</span><span class="p">}});</span></div>



<span class="c1">###################################################################################################</span>
<span class="c1">#######################               Middleware API                 ##############################</span>
<span class="c1">###################################################################################################</span>



<span class="c1">###################################################################################################</span>
<span class="c1">#######################                 Frontend API                 ##############################</span>
<span class="c1">###################################################################################################</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, AQiPT developers and contributors. Last updated on Oct 27, 2022. .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>